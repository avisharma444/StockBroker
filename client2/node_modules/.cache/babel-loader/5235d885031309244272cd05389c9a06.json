{"ast":null,"code":"\"use client\"; // src/useMutation.ts\n\nimport * as React from \"react\";\nimport { MutationObserver, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { noop, shouldThrowError } from \"./utils.js\";\n\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(() => new MutationObserver(client, options));\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(React.useCallback(onStoreChange => observer.subscribe(notifyManager.batchCalls(onStoreChange)), [observer]), () => observer.getCurrentResult(), () => observer.getCurrentResult());\n  const mutate = React.useCallback((variables, mutateOptions) => {\n    observer.mutate(variables, mutateOptions).catch(noop);\n  }, [observer]);\n\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n\n  return { ...result,\n    mutate,\n    mutateAsync: result.mutate\n  };\n}\n\nexport { useMutation };","map":{"version":3,"mappings":";;AACA,YAAYA,KAAZ,MAAuB,OAAvB;AACA,SAASC,gBAAT,EAA2BC,aAA3B,QAAgD,sBAAhD;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,SAASC,IAAT,EAAeC,gBAAf,QAAuC,YAAvC;;AAUO,SAASC,WAAT,CAMLC,OANK,EAOLC,WAPK,EAQmD;AACxD,QAAMC,SAASN,eAAeK,WAAf,CAAf;AAEA,QAAM,CAACE,QAAD,IAAmBV,eACvB,MACE,IAAIC,gBAAJ,CACEQ,MADF,EAEEF,OAFF,CAFqB,CAAzB;AAQMP,kBAAU,MAAM;AACpBU,aAASC,UAAT,CAAoBJ,OAApB;AACF,GAFM,EAEH,CAACG,QAAD,EAAWH,OAAX,CAFG;AAIN,QAAMK,SAAeZ,2BACbA,kBACHa,aAAD,IACEH,SAASI,SAAT,CAAmBZ,cAAca,UAAd,CAAyBF,aAAzB,CAAnB,CAFE,EAGJ,CAACH,QAAD,CAHI,CADa,EAMnB,MAAMA,SAASM,gBAAT,EANa,EAOnB,MAAMN,SAASM,gBAAT,EAPa,CAArB;AAUA,QAAMC,SAAejB,kBAGnB,CAACkB,SAAD,EAAYC,aAAZ,KAA8B;AAC5BT,aAASO,MAAT,CAAgBC,SAAhB,EAA2BC,aAA3B,EAA0CC,KAA1C,CAAgDhB,IAAhD;AACF,GALmB,EAMnB,CAACM,QAAD,CANmB,CAArB;;AASA,MACEE,OAAOS,KAAP,IACAhB,iBAAiBK,SAASH,OAAT,CAAiBe,YAAlC,EAAgD,CAACV,OAAOS,KAAR,CAAhD,CAFF,EAGE;AACA,UAAMT,OAAOS,KAAb;AACF;;AAEA,SAAO,EAAE,GAAGT,MAAL;AAAaK,UAAb;AAAqBM,iBAAaX,OAAOK;AAAzC,GAAP;AACF","names":["React","MutationObserver","notifyManager","useQueryClient","noop","shouldThrowError","useMutation","options","queryClient","client","observer","setOptions","result","onStoreChange","subscribe","batchCalls","getCurrentResult","mutate","variables","mutateOptions","catch","error","throwOnError","mutateAsync"],"sources":["C:\\Users\\Avi Sharma\\Desktop\\zerodha_proj\\client2\\node_modules\\@tanstack\\react-query\\src\\useMutation.ts"],"sourcesContent":["'use client'\nimport * as React from 'react'\nimport { MutationObserver, notifyManager } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport { noop, shouldThrowError } from './utils'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport type { DefaultError, QueryClient } from '@tanstack/query-core'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TContext = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>,\n  queryClient?: QueryClient,\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const client = useQueryClient(queryClient)\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TContext>(\n        client,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TContext>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.throwOnError, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n"]},"metadata":{},"sourceType":"module"}